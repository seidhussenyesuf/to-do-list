<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern To-Do List</title>
    <!-- Use Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            }
          }
        }
      }
    </script>
    <style>
        /* Custom styles for a modern look and feel */
        
        /* Smooth transitions for all elements */
        body, .bg-white, .bg-gray-100, .bg-gray-200, .bg-gray-800, .bg-gray-900,
        .text-gray-800, .text-gray-200, .text-gray-400, .text-white,
        .shadow-md, .shadow-lg, .hover\\:shadow-xl, .transition-all {
            transition-property: background-color, color, box-shadow, transform;
            transition-duration: 300ms;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Custom scrollbar styling for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: theme('colors.gray.100');
            border-radius: 10px;
        }
        
        .dark ::-webkit-scrollbar-track {
            background: theme('colors.gray.700');
        }

        ::-webkit-scrollbar-thumb {
            background: theme('colors.gray.300');
            border-radius: 10px;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: theme('colors.gray.500');
        }
        
        /* Custom styles for the to-do list items */
        .todo-item.completed .todo-text {
            text-decoration: line-through;
            color: theme('colors.gray.400');
        }

        /* Add animation for new tasks */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .todo-item {
            animation: fadeIn 0.3s ease-out;
        }

    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 font-sans flex items-center justify-center min-h-screen">

    <!-- Main Container -->
    <div class="w-full max-w-xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg transition-all">

        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-white">To-Do List</h1>
            <!-- Dark mode toggle button -->
            <button id="dark-mode-toggle" class="p-2 rounded-full text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors">
                <!-- Moon icon for light mode -->
                <svg id="moon-icon" class="w-6 h-6 block" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.64 13.07A9.5 9.5 0 1 1 10.92 2.36a1 1 0 0 0 0 1.96 7.5 7.5 0 1 0 9.25 9.25 1 1 0 0 0 1.47-1.47z"/>
                </svg>
                <!-- Sun icon for dark mode (initially hidden) -->
                <svg id="sun-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2A10 10 0 1 0 12 22A10 10 0 1 0 12 2zm0 17a7 7 0 1 1 0-14a7 7 0 1 1 0 14zM12 6a6 6 0 1 1 0 12a6 6 0 1 1 0-12zM12 9a3 3 0 1 0 0 6a3 3 0 1 0 0-6zm-6 3a1 1 0 0 1-1 1H3a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1zm12 0a1 1 0 0 1 1-1h2a1 1 0 0 1 0 2h-2a1 1 0 0 1-1-1zM12 5a1 1 0 0 1-1-1V2a1 1 0 0 1 2 0v2a1 1 0 0 1-1 1zm0 14a1 1 0 0 1 1 1v2a1 1 0 0 1-2 0v-2a1 1 0 0 1 1-1zM4.93 4.93a1 1 0 0 1 0 1.41l-1.42 1.42a1 1 0 0 1-1.41 0a1 1 0 0 1 0-1.41l1.42-1.42a1 1 0 0 1 1.41 0zm14.14 14.14a1 1 0 0 1 0-1.41l1.42-1.42a1 1 0 0 1 1.41 0a1 1 0 0 1 0 1.41l-1.42 1.42a1 1 0 0 1-1.41 0zM4.93 19.07a1 1 0 0 1 1.41 0l1.42 1.42a1 1 0 0 1 0 1.41a1 1 0 0 1-1.41 0l-1.42-1.42a1 1 0 0 1 0-1.41zm14.14-14.14a1 1 0 0 1 0 1.41l-1.42 1.42a1 1 0 0 1-1.41 0a1 1 0 0 1 0-1.41l1.42-1.42a1 1 0 0 1 1.41 0z"/>
                </svg>
            </button>
        </div>

        <!-- Input Form -->
        <form id="todo-form" class="flex rounded-xl shadow-md overflow-hidden bg-gray-50 dark:bg-gray-700">
            <input 
                type="text" 
                id="todo-input" 
                placeholder="Add a new task..." 
                class="flex-1 p-4 bg-transparent text-gray-800 dark:text-gray-200 placeholder:text-gray-400 focus:outline-none"
            >
            <button 
                type="submit" 
                class="p-4 bg-blue-500 text-white font-semibold hover:bg-blue-600 transition-colors"
            >
                Add
            </button>
        </form>

        <!-- To-Do List Container -->
        <ul id="todo-list" class="mt-8 space-y-4">
            <!-- List items will be dynamically added here -->
        </ul>

        <!-- Empty list message -->
        <div id="empty-message" class="mt-8 text-center text-gray-400 dark:text-gray-500">
            Your to-do list is empty!
        </div>

    </div>

    <!-- JavaScript for functionality -->
    <script>
        // --- DOM Element Selection ---
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const sunIcon = document.getElementById('sun-icon');
        const moonIcon = document.getElementById('moon-icon');
        const todoForm = document.getElementById('todo-form');
        const todoInput = document.getElementById('todo-input');
        const todoList = document.getElementById('todo-list');
        const emptyMessage = document.getElementById('empty-message');

        // --- Local Storage Keys ---
        const STORAGE_KEY = 'todoList';

        // --- Dark Mode Toggle Functionality ---
        let isDarkMode = localStorage.getItem('isDarkMode') === 'true';

        // Apply initial dark mode setting on page load
        if (isDarkMode) {
            document.documentElement.classList.add('dark');
            sunIcon.classList.remove('hidden');
            moonIcon.classList.add('hidden');
        } else {
            document.documentElement.classList.remove('dark');
            sunIcon.classList.add('hidden');
            moonIcon.classList.remove('hidden');
        }

        darkModeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            localStorage.setItem('isDarkMode', isDarkMode);
            document.documentElement.classList.toggle('dark');
            sunIcon.classList.toggle('hidden');
            moonIcon.classList.toggle('hidden');
        });

        // --- Helper Functions ---
        
        /**
         * Toggles the visibility of the empty list message.
         */
        const toggleEmptyMessage = () => {
            if (todoList.children.length === 0) {
                emptyMessage.classList.remove('hidden');
            } else {
                emptyMessage.classList.add('hidden');
            }
        };

        /**
         * Renders a single to-do item on the page.
         * @param {Object} todo - The to-do item object.
         * @param {string} todo.id - The unique ID of the task.
         * @param {string} todo.text - The text content of the task.
         * @param {boolean} todo.completed - The completion status of the task.
         */
        const renderTodoItem = (todo) => {
            const listItem = document.createElement('li');
            listItem.className = `todo-item flex items-center justify-between p-4 rounded-xl bg-gray-200 dark:bg-gray-700 shadow-md transform hover:shadow-lg transition-all ${todo.completed ? 'completed' : ''}`;
            listItem.dataset.id = todo.id;

            const todoContent = document.createElement('div');
            todoContent.className = 'flex items-center flex-1 min-w-0';

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.checked = todo.completed;
            checkbox.className = 'w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer transition-colors';

            const textSpan = document.createElement('span');
            textSpan.className = 'todo-text flex-1 ml-4 text-gray-800 dark:text-gray-200 truncate transition-colors';
            textSpan.textContent = todo.text;

            const deleteButton = document.createElement('button');
            deleteButton.className = 'delete-btn ml-4 text-gray-400 hover:text-red-500 transition-colors';
            deleteButton.innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>`;

            todoContent.appendChild(checkbox);
            todoContent.appendChild(textSpan);
            listItem.appendChild(todoContent);
            listItem.appendChild(deleteButton);
            todoList.appendChild(listItem);
        };

        /**
         * Saves the current list of tasks to local storage.
         */
        const saveTodos = () => {
            const todos = [];
            document.querySelectorAll('.todo-item').forEach(item => {
                todos.push({
                    id: item.dataset.id,
                    text: item.querySelector('.todo-text').textContent,
                    completed: item.classList.contains('completed')
                });
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(todos));
        };

        /**
         * Loads tasks from local storage and renders them on the page.
         */
        const loadTodos = () => {
            const todos = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            todos.forEach(todo => renderTodoItem(todo));
            toggleEmptyMessage();
        };

        // --- Event Listeners ---

        // Handle adding a new task when the form is submitted
        todoForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const todoText = todoInput.value.trim();
            if (todoText === '') {
                return;
            }

            const newTodo = {
                id: Date.now().toString(), // Use a timestamp as a unique ID
                text: todoText,
                completed: false
            };

            renderTodoItem(newTodo);
            saveTodos();
            todoInput.value = '';
            toggleEmptyMessage();
        });

        // Handle clicks on the to-do list for checking/unchecking and deleting tasks
        todoList.addEventListener('click', (e) => {
            const listItem = e.target.closest('.todo-item');
            if (!listItem) {
                return; // Clicked somewhere else
            }

            // If the user clicked the checkbox, toggle the 'completed' class
            if (e.target.type === 'checkbox') {
                listItem.classList.toggle('completed');
                saveTodos();
            }

            // If the user clicked the delete button, remove the list item
            if (e.target.closest('.delete-btn')) {
                listItem.classList.add('fade-out'); // Optional: Add a fade-out animation
                setTimeout(() => {
                    listItem.remove();
                    saveTodos();
                    toggleEmptyMessage();
                }, 300); // Wait for the animation to complete
            }
        });

        // Clear all tasks from the list (optional feature)
        // You could add a button for this on the page if you like
        /*
        const clearAllButton = document.getElementById('clear-all-btn');
        clearAllButton.addEventListener('click', () => {
            todoList.innerHTML = '';
            saveTodos();
            toggleEmptyMessage();
        });
        */

        // --- Initial Page Load ---
        window.addEventListener('load', loadTodos);
    </script>

</body>
</html>
